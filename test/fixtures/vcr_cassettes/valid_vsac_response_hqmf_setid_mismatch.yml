---
http_interactions:
- request:
    method: post
    uri: http://localhost:8080/cql/translator
    body:
      encoding: ASCII-8BIT
      string: "--899588\r\nContent-Disposition: form-data; name=\"file[]\"\r\n\r\nlibrary
        InitiationandEngagementofAlcoholandOtherDrugDependenceTreatment version '0.0.001'\n\nusing
        QDM version '5.0'\n\nvalueset \"Psych Visit - Psychotherapy\": 'urn:oid:2.16.840.1.113883.3.526.3.1496'
        \n\nvalueset \"Alcohol and Drug Dependence\": 'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1001'
        \n\nvalueset \"Face-to-Face Interaction\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1048'
        \n\nvalueset \"Race\": 'urn:oid:2.16.840.1.114222.4.11.836' \n\nvalueset \"ONC
        Administrative Sex\": 'urn:oid:2.16.840.1.113762.1.4.1' \n\nvalueset \"Office
        Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001' \n\nvalueset \"Hospital
        Inpatient Visit - Initial\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1004'
        \n\nvalueset \"Ethnicity\": 'urn:oid:2.16.840.1.114222.4.11.837' \n\nvalueset
        \"Alcohol and Drug Dependence Treatment\": 'urn:oid:2.16.840.1.113883.3.464.1003.106.12.1005'
        \n\nvalueset \"Payer\": 'urn:oid:2.16.840.1.114222.4.11.3591' \n\nvalueset
        \"Detoxification Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1059'
        \n\nvalueset \"Discharge Services - Hospital Inpatient\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1007'
        \n\nvalueset \"Hospital Observation Care - Initial\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1002'
        \n\nvalueset \"Discharge Services - Hospital Inpatient Same Day Discharge\":
        'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1006' \n\nvalueset \"Emergency
        Department Visit\": 'urn:oid:2.16.840.1.113883.3.464.1003.101.12.1010' \n\nparameter
        \"Measurement Period\" Interval<DateTime>\n\ncontext Patient\n\ndefine \"SDE
        Ethnicity\": [\"Patient Characteristic Ethnicity\": \"Ethnicity\"]\n\ndefine
        \"SDE Payer\": [\"Patient Characteristic Payer\": \"Payer\"]\n\ndefine \"SDE
        Race\": [\"Patient Characteristic Race\": \"Race\"]\n\ndefine \"SDE Sex\":
        [\"Patient Characteristic Sex\": \"ONC Administrative Sex\"]\n\ndefine \"Initial
        Population 1\": \"In Demographic\" \r\n and exists (\"First Alcohol Drug Dependence
        Dx\")\n\ndefine \"Denominator 1\": \"Initial Population 1\"\n\ndefine \"Numerator
        1\": exists (\"Drug Dependence Treatment Or Psych Visit\")\n\ndefine \"Stratification
        1_1\": AgeInYearsAt(start of \"Measurement Period\") >= 13 \r\n     and AgeInYearsAt(start
        of \"Measurement Period\") < 18\n\ndefine \"Stratification 1_2\": AgeInYearsAt(start
        of \"Measurement Period\") >= 18\n\ndefine \"Initial Population 2\": \"In
        Demographic\" \r\nand exists (\"First Alcohol Drug Dependence Dx\")\n\ndefine
        \"Denominator 2\": \"Initial Population 2\"\n\ndefine \"Denominator Exclusions
        1\": [\"Diagnosis\": \"Alcohol and Drug Dependence\"] Diagnosis \r\n     with
        \"First Alcohol Drug Dependence Dx\" FirstDiagnosis \r\n       such that Diagnosis.prevalencePeriod
        starts 60 days or less after start of FirstDiagnosis.prevalencePeriod\n\ndefine
        \"Denominator Exclusions 2\": [\"Diagnosis\": \"Alcohol and Drug Dependence\"]
        Diagnosis \r\n     with \"First Alcohol Drug Dependence Dx\" FirstDiagnosis
        \r\n       such that Diagnosis.prevalencePeriod starts 60 days or less after
        start of FirstDiagnosis.prevalencePeriod\n\ndefine \"Drug Dependence Treatment
        Encounters A Month After Diagnosis\": \"Drug Dependence Treatment Or Psych
        Encounters\" Encounter \r\n     with \"Drug Dependence Treatment Or Psych
        Visit\" Visit \r\n       such that Visit.relevantPeriod starts 30 days or
        less after start of Encounter.relevantPeriod\n\ndefine \"Numerator 2\": \"Numerator
        1\" \r\n     and Count(\"Drug Dependence Treatment Encounters A Month After
        Diagnosis\") >= 2\n\ndefine \"In Demographic\": AgeInYearsAt(start of \"Measurement
        Period\") >= 13\n\ndefine \"Valid Encounters\": distinct ( \r\n[\"Encounter,
        Performed\": \"Office Visit\"] \r\n union [\"Encounter, Performed\": \"Emergency
        Department Visit\"] \r\n union [\"Encounter, Performed\": \"Detoxification
        Visit\"] \r\n union [\"Encounter, Performed\": \"Hospital Observation Care
        - Initial\"] \r\n union [\"Encounter, Performed\": \"Hospital Inpatient Visit
        - Initial\"] \r\n union [\"Encounter, Performed\": \"Discharge Services -
        Hospital Inpatient Same Day Discharge\"] \r\n union [\"Encounter, Performed\":
        \"Discharge Services - Hospital Inpatient\"] \r\n union [\"Encounter, Performed\":
        \"Face-to-Face Interaction\"] \r\n)\n\ndefine \"Encounters During Measurement
        Period\": \"Valid Encounters\" Encounter \r\n  where Encounter.relevantPeriod
        during \"Measurement Period\"\n\ndefine \"Alcohol and Drug Dependence Diagnosis\":
        [\"Diagnosis\": \"Alcohol and Drug Dependence\"]\n\ndefine \"First Alcohol
        Drug Dependence Interval\": Interval[start of \"Measurement Period\", start
        of \"Measurement Period\" + 10 months]\n\ndefine \"First Alcohol Drug Dependence\":
        { First( \r\n   \"Alcohol and Drug Dependence Diagnosis\" Diagnosis \r\n     where
        Diagnosis.prevalencePeriod starts during \"First Alcohol Drug Dependence Interval\"
        \r\n      sort by start of prevalencePeriod \r\n ) \r\n}\n\ndefine \"First
        Alcohol Drug Dependence Dx\": \"First Alcohol Drug Dependence\" Diagnosis
        \r\n  with \"Encounters During Measurement Period\" Encounter \r\n  such that
        Diagnosis.prevalencePeriod starts during Encounter.relevantPeriod\n\ndefine
        \"Drug Dependence Treatment Or Psych Encounters\": [\"Encounter, Performed\":
        \"Alcohol and Drug Dependence Treatment\"] \r\n union [\"Encounter, Performed\":
        \"Psych Visit - Psychotherapy\"]\n\ndefine \"Drug Dependence Treatment Or
        Psych Visit\": \"Drug Dependence Treatment Or Psych Encounters\" Encounter
        \r\n     with \"First Alcohol Drug Dependence Dx\" Diagnosis \r\n     such
        that Diagnosis.prevalencePeriod starts 14 days or less after start of Encounter.relevantPeriod\n\r\n--899588--\r\n"
    headers:
      Accept:
      - "*/*; q=0.5, application/xml"
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '5344'
      Content-Type:
      - multipart/form-data; boundary=899588
      User-Agent:
      - Ruby
  response:
    status:
      code: 504
      message: Gateway Timeout
    headers:
      Mime-Version:
      - '1.0'
      Date:
      - Tue, 22 Aug 2017 14:38:55 EDT
      Via:
      - 1.1 ironportb2.mitre.org:80 (Cisco-WSA/9.1.1-074)
      Content-Type:
      - text/html
      Connection:
      - keep-alive
      Proxy-Connection:
      - keep-alive
      Content-Length:
      - '3676'
    body:
      encoding: UTF-8
      string: "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\r\n\"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n<head>\r\n<meta
        http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\">\r\n<title>Notification:
        Gateway Timeout</title>\r\n<style type=\"text/css\">\r\n<!--\r\nbody {\r\n
        \   font-family: verdana, Arial, Helvetica, sans-serif;\r\n\tmargin-top: 0%;\r\n\tmargin-left:
        0%;\r\n\tmargin-right: 0%;\r\n}\r\np {\r\n    font-size: 12px;\r\n    top:
        0px;\r\n    margin-top: 6px;\r\n    margin-bottom: 6px;\r\n}\r\ntd {\r\n    font-size:
        12px;\r\n    top: 0px;\r\n}\r\n.code {\r\n    font-family: courier;\r\n    font-size:
        12px;\r\n    top: 0px;\r\n}\r\nh1 {\r\n    font-size: 16px;\r\n    margin-top:
        24px;\r\n    margin-bottom: 8px;\r\n}\r\nhr {\r\n    margin-top: 2px;\r\n
        \   margin-bottom: 2px;\r\n}\r\n-->\r\n</style>\r\n</head>\r\n\r\n<body>\r\n\r\n<!--
        Start MII Header --> \r\n<script type=\"text/javascript\" src=\"http://info.mitre.org/webapps/mii_header/miiHeader.js\"></script>
        \r\n<!-- End MII Header -->\r\n\r\n<div style=\"padding-top: 1em; padding-left:
        2%; padding-right: 2%;\">\r\n<img style=\"padding-left: 5px; padding-top:
        5px;\" src=\"http://info.mitre.org/it_services/images/cit_logo.png\" border=\"0\">\r\n\r\n<h1>This
        Page Cannot Be Displayed</h1>\r\n<hr>\r\n\r\n<p>\r\nThe system cannot communicate
        with the external server (&nbsp;localhost&nbsp;).\r\nThe Internet server may
        be busy, may be permanently down, or may be\r\nunreachable because of network
        problems.\r\n</p>\r\n<br>\r\n\r\n<p>\r\nPlease check the spelling of the Internet
        address entered.\r\nIf it is correct, try this request later.\r\n</p>\r\n<br>\r\n\r\n<!--
        -----------------------------------------------------------------------------------
        -->\r\n<!-- ------------------Start custom EUN messages ---------------------------------------
        -->\r\n<!-- -----------------------------------------------------------------------------------
        -->\r\n<p>\r\nIf you have questions, or feel this is an error, please contact\r\nthe
        <b>MITRE Help Desk</b> at x1-7227 or x3-7227 or by email at <a href=\"mailto:helpdesk@mitre.org\">helpdesk@mitre.org</a>
        and provide the information below:\r\n</p>\r\n\r\n<ul>\r\n<li>The URL of the
        website you are trying to reach</li>\r\n<li>The notification code at the bottom
        of this page</li>\r\n<li>How you are currently connected to the internet (MITRE
        internal network, outernet, VPN, SoHo, etc.)</li>\r\n</ul>\r\n\r\n<!-- -----------------------------------------------------------------------------------
        -->\r\n<!-- ---------------------Old code commented out----------------------------------------
        -->\r\n<!-- -----------------------------------------------------------------------------------
        -->\r\n<!-- commented out line below which pulls message from GUI interface
        -->\r\n<!-- <p><br> There has been an error and the web page is unable to
        be displayed. <br>  Please contact the MITRE Help Desk (helpdesk@mitre.org)
        and provide the information below:<br> <br>  1) The URL you are trying to
        reach<br>  2) The browser you are using<br>  3) Has this URL been reachable
        in the past?<br> 3) The internet connection you are currently using<br>  4)
        The notification codes at the bottom of this page<br>  5) And any other information
        you think may be important<br>  <br>  Also refer to FJ: \"proxy\" for additional
        information.<br></p> -->\r\n<!-- <p> -->\r\n<!-- If you have questions, or
        feel this is an error, please contact -->\r\n<!-- MITRE Help Desk (&nbsp;<a
        href=\"mailto:helpdesk@mitre.org\">helpdesk@mitre.org</a>&nbsp;) -->\r\n<!--
        and provide the codes shown below. -->\r\n<!-- </p> -->\r\n\r\n<hr>\r\n<table>\r\n
        \ <tr valign=\"top\">\r\n    <td valign=\"top\" width=\"10%\">Notification&nbsp;codes:&nbsp;</td>\r\n
        \   <td valign=\"top\" class=\"code\" width=\"90%\">(1, GATEWAY_TIMEOUT, localhost)</td>\r\n
        \ </tr>\r\n</table>\r\n\r\n</div>\r\n</body>\r\n</html>\r\n"
    http_version: 
  recorded_at: Tue, 22 Aug 2017 18:38:55 GMT
recorded_with: VCR 3.0.3
