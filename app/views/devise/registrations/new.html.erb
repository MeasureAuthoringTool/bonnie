<div class="navbar row" role="navigation">
  <div class="navbar-brand">
    <a href="/#">Bonnie</a>
  </div>
</div>

<h1>Register</h1>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {name: "register_form", class: "registration"}) do |f| %>
  <% if resource.errors.present? %>
  <div class="alert alert-danger">
    <%= devise_error_messages! %>
  </div>
  <% end %>

  <div class="form-group row">
    <div class="col-md-6">
      <div class="input-group input-group-lg required">
        <label for="user_first_name" class="sr-only">First Name </label>
        <span class="input-group-addon"><i class="fa fa-user fa-lg fa-fw" aria-hidden="true"></i></span>
        <%= f.text_field :first_name, class: "form-control", placeholder: "first name", required: true, 'aria-required': true %>
      </div>
    </div>
    <div class="col-md-6">
      <div class="input-group input-group-lg required">
        <label for="user_last_name" class="sr-only">Last Name </label>
        <span class="input-group-addon"><i class="fa fa-user fa-lg fa-fw" aria-hidden="true"></i></span>
        <%= f.text_field :last_name, class: "form-control", placeholder: "last name", required: true, 'aria-required': true %>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-md-6">
      <div class="input-group input-group-lg required">
        <label for="user_email" class="sr-only">Email </label>
        <span class="input-group-addon"><i class="fa fa-envelope fa-lg fa-fw" aria-hidden="true"></i></span>
        <%= f.email_field :email, class: "form-control", placeholder: "email@example.com*", required: true, 'aria-required': true %>
      </div>
    </div>
    <div class="col-md-6">
      <div class="input-group input-group-lg">
        <label for="user_telephone" class="sr-only">Telephone </label>
        <span class="input-group-addon"><i class="fa fa-mobile fa-lg fa-fw" aria-hidden="true"></i></span>
        <%= f.text_field :telephone, class: "form-control", placeholder: "(000) 000-0000" %>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-md-6">
      <div class="input-group input-group-lg required">
        <label for="registered_harp_id" class="sr-only">HARP ID</label>
        <span class="input-group-addon"><i class="fa fa-id-card fa-lg fa-fw" aria-hidden="true"></i></span>
        <%= f.text_field :harp_id, class: "form-control", placeholder: "HARP ID*", required: true, 'aria-required': true %>
      </div>
    </div>
  </div>
  <div id="termsAndConditions">
    <p><strong>Terms and conditions for use of Bonnie.</strong></p>
    <p>Performance measures and related data specifications (the "Measures") are copyrighted by the noted quality measure providers as indicated in the applicable Measure. Coding vocabularies are owned by their copyright owners. By using the Measures, a user ("User") agrees to these Terms of Use. Measures are not clinical guidelines and do not establish a standard of medical care and quality measure providers are not responsible for any use of or reliance on the Measures.</p>
    <p>THE MEASURES AND SPECIFICATIONS ARE PROVIDED "AS IS" WITHOUT ANY WARRANTY OF ANY KIND, AND ANY AND ALL IMPLIED WARRANTIES ARE HEREBY DISCLAIMED, INCLUDING ANY WARRANTY OF NON-INFRINGEMENT, ACCURACY, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. NO QUALITY MEASURE PROVIDER, NOR ANY OF THEIR TRUSTEES, DIRECTORS, MEMBERS, AFFILIATES, OFFICERS, EMPLOYEES, SUCCESSORS AND/OR ASSIGNS WILL BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, SPECIAL, EXEMPLARY, INCIDENTAL, PUNITIVE, AND/OR CONSEQUENTIAL DAMAGE OF ANY KIND, IN CONTRACT, TORT OR OTHERWISE, IN CONNECTION WITH THE USE OF THE BONNIE TOOL OR THE MEASURES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH LOSS OR DAMAGE.</p>
    <p>The Measures are licensed to a User for the limited purpose of using, reproducing and distributing the Measures with the Bonnie Tool as delivered to User, without any modification, for commercial and noncommercial uses, but such uses are only permitted if the copies of the Measures contain this complete Copyright, Disclaimer and Terms of Use. Users of the Measures may not alter, enhance, or otherwise modify the Measures.</p>
    <p>NOT A CONTRIBUTION - The Measures, including specifications and coding, as used in the Bonnie Tool, are not a contribution under the Apache license. Coding in the Measures is provided for convenience only and necessary licenses for use should be obtained from the copyright owners. Current Procedural Terminology (CPT®) © 2004-2010 American Medical Association. LOINC® © 2004 Regenstrief Institute, Inc. SNOMED Clinical Terms® (SNOMED CT®) © 2004-2010 International Health Terminology Standards Development Organization.</p>
  </div>

  <div class="required">
    <%= check_box_tag :agree_license %>
    <%= label_tag :agree_license, "I agree to the above Terms and Conditions of use*", class: "control-label" %>
  </div>

  <div class="form-group row" style="margin-top: 30px">
    <div class="col-md-6">
      <%= render :partial => "devise/shared/links" %>
    </div>

    <div class="col-md-6">
      <div class="row">
      <div class="col-xs-6"><a class="btn btn-default btn-block btn-lg" href="/">Cancel</a></div>
      <div class="col-xs-6"><%= f.submit "Register", class: "btn btn-primary btn-block btn-lg", disabled: true %></div>
      </div>
    </div>
  </div>

<% end -%>

<% flash.each do |message_type, message| %>
  <% if flash[:msg] %>
    <div class="modal fade in msgDialog" id="msgDialog" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog" role="dialog" aria-labelledby="modalTitle">
        <div class="modal-content">
          <div class="modal-header">
            <h1 id="modalTitle"><%= flash[:msg][:title] %></h1>
          </div>
          <div class="modal-body">
            <% if flash[:msg][:summary] %>
            <div>
              <h4><%= flash[:msg][:summary] %></h4>
            </div>
            <% end %>
            <p>
              <%= flash[:msg][:body] %>
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>

<% if not user_signed_in? %>
  <script>
      window.disableSessionManagement = true;
  </script>
<% end %>
<script>
  $(function() {
    $('#agree_license').on('change', function(e) {
      var $checkbox = $(e.target),
          $form = $checkbox.closest('form'),
          $submit = $form.find(':submit');
      $submit.prop('disabled', !$checkbox.is(':checked'));
    });

    $('.field_with_errors').parent().removeClass('required').addClass('has-error'); //allows icon to change color appropriately for validation
    $('.modal').modal('show');
  });
</script>
